<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Módulo de Práctica de Escritura</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Quicksand', sans-serif;
            background-color: white;
            padding: 20px;
        }

        /* Contenedor de los dos cuadros */
        .practice-area {
            display: flex;
            align-items: flex-end;
            gap: 8px;
            margin-top: 10px;
        }

        /* Cuadros de escritura */
        .box-upper, .box-lower, .box-number {
            border: 2px dashed #cbd5e1;
            border-radius: 8px;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            color: #e2e8f0; /* Color para remarcar */
            user-select: none;
        }

        .box-upper, .box-number {
            height: 80px;
            width: 70px;
            background-color: #eff6ff;
            border-color: #3b82f6;
        }

        .box-lower {
            height: 50px;
            width: 60px;
            background-color: #ecfdf5;
            border-color: #10b981;
        }

        /* Línea de base */
        .box-upper::after, .box-lower::after, .box-number::after {
            content: "";
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            border-bottom: 2px solid #cbd5e1;
            opacity: 0.5;
        }

        .letter-card {
            border: 2px solid #e2e8f0;
            border-radius: 20px;
            padding: 15px;
            background: white;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }

        .letter-display {
            font-size: 2.5rem;
            color: #1e293b;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .box-label {
            font-size: 0.6rem;
            text-transform: uppercase;
            font-weight: bold;
            color: #64748b;
            margin-bottom: 2px;
        }

        /* Estilo para el nombre a remarcar */
        #display-name {
            color: #e2e8f0;
            font-size: 1.5rem;
            font-weight: 700;
            letter-spacing: 2px;
            line-height: 1;
        }

        @media print {
            .no-print { display: none !important; }
            body { padding: 0; }
            .letter-card { 
                box-shadow: none; 
                border: 1px solid #e2e8f0;
                break-inside: avoid;
                padding: 10px;
            }
            .box-upper, .box-lower, .box-number { background: none !important; }
            
            /* Forzar 5 columnas por fila */
            #grid-container {
                display: grid !important;
                grid-template-columns: repeat(5, 1fr) !important;
                gap: 8px !important;
            }

            .letter-display { font-size: 1.8rem; }
            .box-upper, .box-number { height: 60px; width: 55px; font-size: 1.8rem; }
            .box-lower { height: 40px; width: 45px; font-size: 1.5rem; }
        }

        .calendar-box {
            border: 2px solid #3b82f6;
            border-radius: 12px;
            padding: 10px;
        }
    </style>
</head>
<body>

    <!-- Panel de Configuración -->
    <div class="no-print bg-slate-50 p-6 rounded-2xl mb-8 border border-slate-200">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 items-end">
            <div>
                <label class="block text-sm font-bold text-slate-600 mb-2">Modo de práctica:</label>
                <select id="mode-select" onchange="setMode(this.value)" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none">
                    <option value="vacio">Abecedario (Vacío)</option>
                    <option value="remarcar">Abecedario (Remarcar)</option>
                    <option value="especiales">Caracteres y Símbolos</option>
                    <option value="numeros">Números 1-10</option>
                    <option value="texto">Texto Personalizado</option>
                </select>
            </div>

            <div>
                <label class="block text-sm font-bold text-slate-600 mb-2">Nombre del Alumno (Remarcar):</label>
                <input type="text" id="name-input" placeholder="Nombre..." oninput="updateName(this.value)" class="w-full px-4 py-2 border border-slate-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500">
            </div>

            <div id="custom-text-container" class="hidden">
                <label class="block text-sm font-bold text-slate-600 mb-2">Texto para la hoja:</label>
                <input type="text" id="custom-input" oninput="render()" placeholder="Ej: Hola" class="w-full px-4 py-2 border border-slate-300 rounded-lg outline-none focus:ring-2 focus:ring-blue-500">
            </div>
            
            <div class="lg:col-span-3 flex justify-end">
                <button onclick="window.print()" class="bg-blue-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-blue-700 transition-colors shadow-md">Imprimir Hoja</button>
            </div>
        </div>
    </div>

    <!-- Hoja -->
    <div class="max-w-4xl mx-auto bg-white">
        <!-- Encabezado -->
        <div class="grid grid-cols-3 gap-4 mb-8 items-start">
            <div class="col-span-2 border-b-2 border-dashed border-blue-200 h-16 flex items-end pb-1 px-2">
                <span class="font-bold text-slate-500 mr-4">Nombre:</span>
                <div id="display-name" class="flex-grow"></div>
            </div>
            <div class="calendar-box text-center">
                <div class="text-[10px] font-bold text-blue-600 uppercase mb-1">Fecha</div>
                <div class="grid grid-cols-3 gap-1">
                    <div class="border-b border-slate-300 h-6"></div>
                    <div class="border-b border-slate-300 h-6"></div>
                    <div class="border-b border-slate-300 h-6"></div>
                </div>
            </div>
        </div>

        <h2 id="sheet-title" class="text-xl font-bold text-center text-slate-800 mb-6 uppercase tracking-wide border-b border-slate-100 pb-2">Practicamos el Abecedario</h2>

        <div id="grid-container" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
            <!-- Dinámico -->
        </div>
    </div>

    <script>
        let currentMode = 'vacio';
        const alphabet = ['Aa','Bb','Cc','Dd','Ee','Ff','Gg','Hh','Ii','Jj','Kk','Ll','Mm','Nn','Ññ','Oo','Pp','Qq','Rr','Ss','Tt','Uu','Vv','Ww','Xx','Yy','Zz'];
        const specialChars = ['Áá','Éé','Íí','Óó','Úú','Üü','¡!','¿?','""','/','#'];
        const numbers = ['1','2','3','4','5','6','7','8','9','10'];

        const grid = document.getElementById('grid-container');
        const sheetTitle = document.getElementById('sheet-title');
        const customContainer = document.getElementById('custom-text-container');

        function setMode(mode) {
            currentMode = mode;
            customContainer.classList.toggle('hidden', mode !== 'texto');
            
            const titles = {
                vacio: "Practicamos el Abecedario",
                remarcar: "Remarcamos el Abecedario",
                especiales: "Símbolos y Acentos",
                numeros: "Aprendemos los Números",
                texto: "Escritura Personalizada"
            };
            sheetTitle.textContent = titles[mode];
            render();
        }

        function updateName(val) {
            document.getElementById('display-name').textContent = val;
        }

        function render() {
            grid.innerHTML = '';
            let items = [];

            if (currentMode === 'vacio' || currentMode === 'remarcar') items = alphabet;
            else if (currentMode === 'especiales') items = specialChars;
            else if (currentMode === 'numeros') items = numbers;
            else if (currentMode === 'texto') items = [...document.getElementById('custom-input').value || "Hola"];

            items.forEach(item => {
                if (item.trim() === "") return;
                
                if (currentMode === 'numeros') {
                    createNumberCard(item);
                } else {
                    const isUpper = item[0] === item[0].toUpperCase() && item[0] !== item[0].toLowerCase();
                    const trace1 = item[0];
                    const trace2 = item.length > 1 ? item[1] : (isUpper ? '' : item[0]);
                    const isTracing = currentMode !== 'vacio';
                    const isSymbol = !/[a-zñáéíóúü]/i.test(item);
                    
                    createLetterCard(item, trace1, trace2, isTracing, isSymbol);
                }
            });
        }

        function createLetterCard(display, t1, t2, isTracing, isSymbol) {
            const card = document.createElement('div');
            card.className = 'letter-card';
            card.innerHTML = `
                <div class="letter-display">${display}</div>
                <div class="practice-area">
                    <div class="flex flex-col items-center">
                        <span class="box-label">${isSymbol ? '1' : 'May'}</span>
                        <div class="box-upper">${isTracing ? t1 : ''}</div>
                    </div>
                    <div class="flex flex-col items-center">
                        <span class="box-label">${isSymbol ? '2' : 'Min'}</span>
                        <div class="box-lower">${isTracing ? t2 : ''}</div>
                    </div>
                </div>
            `;
            grid.appendChild(card);
        }

        function createNumberCard(num) {
            const card = document.createElement('div');
            card.className = 'letter-card';
            card.innerHTML = `
                <div class="letter-display">${num}</div>
                <div class="practice-area">
                    <div class="flex flex-col items-center">
                        <span class="box-label">Trazo</span>
                        <div class="box-number">${num}</div>
                    </div>
                    <div class="flex flex-col items-center">
                        <span class="box-label">Libre</span>
                        <div class="box-number"></div>
                    </div>
                </div>
            `;
            grid.appendChild(card);
        }

        render();
    </script>
</body>
</html>